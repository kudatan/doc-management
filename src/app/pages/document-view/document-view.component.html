<ng-container *ngIf="!loading(); else loadingScreen">
  <div class="doc-header">
    <div *ngIf="isUser; else onlyName">
      <mat-form-field appearance="outline">
        <mat-label>Document name</mat-label>
        <input
          matInput
          [value]="name()"
          (input)="name.set($any($event.target).value)"
        />
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        (click)="saveName()"
        [disabled]="name().trim() === initialName().trim()"
      >
        Save
      </button>
    </div>

    <div *ngIf="!isUser">
      <mat-form-field appearance="fill" class="status-select">
        <mat-label>Change Status</mat-label>
        <mat-select
          [value]="document()?.status"
          (selectionChange)="selectedStatus.set($event.value); changeStatus()"
          [disabled]="statusLoading()"
        >
          <mat-option value="UNDER_REVIEW">Under Review</mat-option>
          <mat-option value="APPROVED">Approved</mat-option>
          <mat-option value="DECLINED">Declined</mat-option>
        </mat-select>
      </mat-form-field>
    </div>


    <ng-template #onlyName>
      <h1>Document name: <span>{{ document()?.name }}</span></h1>
    </ng-template>

    <p>Status: {{ document()?.status }}</p>

    <button
      *ngIf="isUser && (document()?.status === 'DRAFT' || document()?.status === 'REVOKE')"
      mat-raised-button
      color="warn"
      (click)="deleteDocument()"
    >
      Delete
    </button>

    <button
      *ngIf="isUser && document()?.status === 'READY_FOR_REVIEW'"
      mat-raised-button
      color="accent"
      (click)="revokeDocument()"
    >
      Revoke from Review
    </button>


  </div>
</ng-container>

<div id="pspdfkit-container" class="viewer-container"></div>
<ng-template #loadingScreen>
    <div class="fullscreen-loader">
      <mat-spinner diameter="60"></mat-spinner>
    </div>
</ng-template>
